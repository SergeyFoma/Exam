{% extends "plumber/base_plumber.html" %}


{% block content %}

{% load plumber_tags %}
<div style="position:fixed;z-index:12;width:100%;width:200px;margin-left:30px;"><h3>–í—Ä–µ–º—è –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ - {{que.count|timing:5}} –º–∏–Ω—É—Ç.</h3></div>
<div id="time"style="position:fixed;z-index:10;width:100%;width:150px;margin-top:60px;margin-left:30px;">00:00</div>

    {%comment%}{{request.user.is_authenticated}}{%endcomment%}
        {%comment%}<p>–≠–∫–∑–∞–º–µ–Ω—É—é—â–∏–π—Å—è: {{request.user.username}}</p>{%endcomment%}
    <div class="test_conteiner">
    <div class="test">
        <h2 class="mash-h2"style="color:black;margin-bottom:20px;">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ - {{mash.name}}</h2>
        {% for i in que %}<!--Questions-->
        {%comment%}<p style="color:red">{{i.mash}}</p>{%endcomment%}
            <div class="ques_answ"style="border:1px solid gray;margin-bottom:5px;background:#fff">

                {% if i.image %}
                    <p><img src="{{i.image.url}}" alt=""></p>
                {%endif%}
                
                <h2 class="questions-h2">{{i.text}}</h2> {%comment%}–í–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ–º–µ{%endcomment%}

                <form action="{%url 'plumber:answer'%}"method='get'target="_blank">
                    {% for q in answ %}<!--answ=Answers-->
                    
                        {%if q.ques.name == i.name%}{%comment%}–í–æ–ø—Ä–æ—Å 1=–í–æ–ø—Ä–æ—Å 1{%endcomment%}
                    
                                {%if q.active%}
                                    <p style="margin-bottom:5px"><input type="radio"id='rad1'name='{{i.text}}'value="–í–µ—Ä–Ω–æ">
                                    <label for="rad1">{{q.num}}. {{q.answer}}</label></p>
                                    {%comment%}{{q.num}}. {{q.answer}}</p>{%endcomment%}
                                {%else%}
                                    <p style="margin-bottom:5px"><input type="radio"id='rad1'name='{{i.text}}'value="–ù–µ –≤–µ—Ä–Ω–æ">
                                    <label for="rad1">{{q.num}}. {{q.answer}}</label></p>
                                                    
                                {%endif%}
                                
                        {%endif%}

                        
                        
                    {%endfor%}
            </div>        
        {%endfor%}
                                    
            {%comment%}<p><button type="submit"id="button"onclick="printMessage">Submit</button></p>{%endcomment%}
            <p style="color:#fff;">–ß—Ç–æ –±—ã —É–∑–Ω–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É >>><button type="submit"id="button"onclick="printMessage">–ó–∞–∫–æ–Ω—á–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</button></p>
            
        </form>
     
    </div>
</div>

<script>
    window.addEventListener("load", function() {
        const clock = document.getElementById("time");
        let time = -1, intervalId;
        
        function incrementTime() {
          time++;
          tim=("0" + Math.trunc(time / 60)).slice(-2) +
            ":" + ("0" + (time % 60)).slice(-2);
/*console.log("TIM",typeof(tim))
console.log("que", typeof(String({{que_count}})))*/
console.log(String({{que_count}}+5)+":00")
console.log(20*60000+300000)
          if (tim === String({{que_count}})+":00"){
              clock.style.color="red";
          }
          clock.textContent =
            tim;
        }
        incrementTime();
        intervalId = setInterval(incrementTime, 1000);
      });
</script>

<script>
    function printMessage() { 
        
        alert("–í—Ä–µ–º—è –≤—ã—à–ª–æ!");
        //window.location.replace("http://127.0.0.1:8000/answer/");   
        document.getElementById('button').click();
        
        }
        setTimeout(printMessage, {{que_count}}*60000+300000);
        clock = document.getElementById("time");

        //button.onclick=printMessage
    
      
</script>
<script>
    //–ö–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è
    btn = document.getElementById('button');
    btn.addEventListener('click', () => {
    // üëáÔ∏è hide button
    btn.style.display = 'none';
    document.getElementById("time").style.display = 'none';

    // üëáÔ∏è show div
    const box = document.getElementById('box');
    box.style.display = 'block';
    });
</script>

{% endblock %}
